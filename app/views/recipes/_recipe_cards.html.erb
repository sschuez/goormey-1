<div class="recipe-card">

  <%= link_to recipe_path(recipe) do %>
    <% if recipe.photo.attached? %>
      <%= cl_image_tag recipe.photo.key, :transformation=>[
      {:width=>800, :height=>800}], 
      class: "card-image" %>
    <% else %>
      <%= image_tag "sample_meal.jpg", class: "card-image" %>
    <% end %>
  <% end %>

  <div class="card-overlay">

    <div class="card-header">

      <%= link_to user_path(recipe.user) do %>
        <% if recipe.user.avatar.attached? %> 
          <%= cl_image_tag recipe.user.avatar.key, :transformation=>[
            {:width=>200, :height=>200, :gravity=>"face", :radius=>"max", :crop=>"thumb"}], 
            class: "avatar", 'aria-haspopup': true, 'aria-expanded': false %>
        <% else %>
          <%= image_tag "default_avatar_square.png", class: "avatar", alt: "avatar", 'aria-haspopup': true, 'aria-expanded': false %>
        <% end %>
      <% end %>

      <%= link_to recipe_path(recipe) do %>
        <div class="card-header-text">
          <h3 class="card-title"><%= highlight(recipe.name, query_array) %></h3>
          <span class="card-status">by <%= highlight(recipe.user.first_name, query_array) %> <%= highlight(recipe.user.last_name, query_array) %></span>
        </div>
      <% end %>

    </div>

    <%= link_to recipe_path(recipe) do %>
      <p class="card-description"><%= highlight(recipe.description, query_array) %></p>
    <% end %>

  </div>

</div>